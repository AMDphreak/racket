# `configure` adds some variables before this line, and
# the rest dispatch to "build.zuo" to build

ZUO=bin/zuo

all: $(ZUO)
	$(ZUO) . all

install: $(ZUO)
	$(ZUO) . install DESTDIR="$(DESTDIR)"

plain-install: $(ZUO)
	$(ZUO) . plain-install DESTDIR="$(DESTDIR)"

cs: $(ZUO)
	$(ZUO) . cs

cs-install: $(ZUO)
	$(ZUO) . cs-install DESTDIR="$(DESTDIR)"

plain-cs-install: $(ZUO)
	$(ZUO) . plain-cs-install DESTDIR="$(DESTDIR)"

bc: $(ZUO)
	$(ZUO) . bc

bc-install: $(ZUO)
	$(ZUO) . bc-install DESTDIR="$(DESTDIR)"

plain-bc-install: $(ZUO)
	$(ZUO) . plain-bc-install DESTDIR="$(DESTDIR)"

3m: $(ZUO)
	$(ZUO) . 3m

cgc: $(ZUO)
	$(ZUO) . cgc

$(ZUO):
	mkdir -p bin
	$(HOSTCC) -DZUO_LIB_PATH='"'"$(upsrcdir)/zuo/lib"'"' -o $(ZUO) $(srcdir)/zuo/zuo.c
